require=function a(l,s,c){function r(t,e){if(!s[t]){if(!l[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(h)return h(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var o=s[t]={exports:{}};l[t][0].call(o.exports,function(e){return r(l[t][1][e]||e)},o,o.exports,a,l,s,c)}return s[t].exports}for(var h="function"==typeof require&&require,e=0;e<c.length;e++)r(c[e]);return r}({BulletControl:[function(e,t,i){"use strict";var n;function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}cc._RF.push(t,"8e45ceGcldKVbfIk1i5rKq7","BulletControl"),cc.Class({extends:cc.Component,properties:(n={GameManager:{default:null,type:cc.Node,visible:!1},NormalBulletSpeed:{default:null,visible:!1},GameSpeedThis:{default:null,visible:!1}},o(n,"GameSpeedThis",{default:null,visible:!1}),o(n,"Enlargex",{default:null,visible:!1}),o(n,"Enlargey",{default:null,visible:!1}),n),onLoad:function(){this.GameManager=cc.find("GameManager");var e=this.GameManager.getComponent("GameManager").BulletLifeTime;this.scheduleOnce(function(){this.TImeOut()},e),this.GameSpeedThis=1,this.Enlargex=!1,this.Enlargey=!1},start:function(){},TImeOut:function(){this.node.destroy()},update:function(e){var t=this.GameManager.getComponent("GameManager").GameSpeed;if(1==this.GameSpeedThis&&1!=t){var i=this.node.getComponent(cc.RigidBody).linearVelocity.x,n=this.node.getComponent(cc.RigidBody).linearVelocity.y;this.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(i*t,n*t),this.GameSpeedThis=t}if(1!=this.GameSpeedThis&&1==t){i=this.node.getComponent(cc.RigidBody).linearVelocity.x,n=this.node.getComponent(cc.RigidBody).linearVelocity.y;this.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(i/this.GameSpeedThis,n/this.GameSpeedThis),this.GameSpeedThis=1}},onBeginContact:function(e,t,i){var n=this.node.getComponent(cc.RigidBody).linearVelocity.x;n<33&&0<=n&&(n+=35,this.Enlargex=!0),-33<n&&n<=0&&(n-=35,this.Enlargex=!0);var o=this.node.getComponent(cc.RigidBody).linearVelocity.y;o<33&&0<=o&&(o+=35,this.Enlargey=!0),-33<o&&o<=0&&(o-=35,this.Enlargey=!0),this.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(n,o)},onEndContact:function(e,t,i){var n=this.node.getComponent(cc.RigidBody).linearVelocity.x;this.Enlargex&&(0<n?n-=35:n+=35,this.Enlargex=!1);var o=this.node.getComponent(cc.RigidBody).linearVelocity.y;this.Enlargey&&(0<o?o-=35:o+=35,this.Enlargey=!1),this.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(n,o)}}),cc._RF.pop()},{}],GameCommon:[function(e,t,i){"use strict";cc._RF.push(t,"491315VcR5Ik77hV2DK5Oad","GameCommon"),t.exports={TouchType:cc.Enum({DEFAULT:0,FOLLOW:1}),DirectionType:cc.Enum({FOUR:4,EIGHT:8,ALL:0}),ItemType:cc.Enum({upRotationSpeed:0,upShootSpeed:1,upBulletSpeed:2,upBulletLifeTime:3,upPlayerSpeed:4,upSkill_1_MAX:5})},cc._RF.pop()},{}],GameManager:[function(e,t,i){"use strict";cc._RF.push(t,"b3132qQpsJFSYeIwvqZPTi4","GameManager");e("GameCommon");cc.Class({extends:cc.Component,properties:{PlayerSpeed1:{default:null,visible:!1},PlayerSpeed2:{default:null,visible:!1},label_PlayerSpeed:{default:null,type:cc.Label},Skill_1_On:{default:null,visible:!1},Skill_1_Level:{default:null,visible:!1},Skill_1_Time:{default:null,visible:!1},label_Skill_1_Time:{default:null,type:cc.Label},Skill_1_Max:{default:null,visible:!1},GameSpeed:{default:null,visible:!1},GamePause:{default:null,visible:!1},RotationSpeed:{default:null,visible:!1},label_RotationSpeed:{default:null,type:cc.Label},ShootSpeed:{default:null,visible:!1},label_ShootSpeed:{default:null,type:cc.Label},BulletSpeed:{default:null,visible:!1},label_BulletSpeed:{default:null,type:cc.Label},BulletLifeTime:{default:null,visible:!1},label_BulletLifeTime:{default:null,type:cc.Label},ItemLifeTime1:{default:null,visible:!1},ItemLifeTime2:{default:null,visible:!1},Score:{default:null,visible:!1},ItemNum:{default:null,visible:!1},label_Score:{default:null,type:cc.Label},Player:{default:null,type:cc.Node},Turret:{default:null,type:cc.Node},Block1:{default:null,type:cc.Node},Block2:{default:null,type:cc.Node},Block3:{default:null,type:cc.Node},Block4:{default:null,type:cc.Node},upRotationSpeedPrefab:{default:null,type:cc.Prefab},upShootSpeedPrefab:{default:null,type:cc.Prefab},upBulletSpeedPrefab:{default:null,type:cc.Prefab},upBulletLifeTimePrefab:{default:null,type:cc.Prefab},upPlayerSpeedPrefab:{default:null,type:cc.Prefab},upSkill_1_MAXPrefab:{default:null,type:cc.Prefab}},onLoad:function(){this.physicsManager=cc.director.getPhysicsManager(),this.physicsManager.enabled=!0,this.GameInit()},GameInit:function(){this.PlayerSpeed1=10,this.PlayerSpeed2=20,this.RotationSpeed=1,this.ShootSpeed=10,this.BulletSpeed=1,this.BulletLifeTime=5,this.Skill_1_On=!1,this.Skill_1_Level=1,this.Skill_1_Time=5,this.Skill_1_Max=5,this.GameSpeed=1,this.Score=0,this.ItemNum=0,this.Player.x=400,this.Player.y=325,this.GameSpeed=1,this.GamePause=!1,this.ItemLifeTime1=0,this.ItemLifeTime2=10,this.UpdateData(),this.ItemNum++,this.SwapBadItem()},GameOver:function(){this.GamePause=!0,cc.log("test"),this.scheduleOnce(function(){this.GameReset()},5)},GameReset:function(){for(var e=this.node.children,t=0;t<this.node.childrenCount;t++)cc.log(e[t]),e[t].destroy();this.Turret.getComponent("TurretControl").GameReset(),this.scheduleOnce(function(){this.GameInit()},.1)},start:function(){},update:function(e){this.GamePause?this.GameSpeed=0:this.Skill_1_On?0<this.Skill_1_Time?(this.GameSpeed=1/(1+this.Skill_1_Level),this.Skill_1_Time-=e,this.Skill_1_Time<0&&(this.Skill_1_Time=0),this.UpdateData()):(this.GameSpeed=1,this.Skill_1_Time=0):(this.GameSpeed=1,this.Skill_1_Time<this.Skill_1_Max&&(this.Skill_1_Time+=e/3,this.UpdateData()))},UpdateData:function(){this.label_PlayerSpeed.string=this.PlayerSpeed2.toString(),this.label_RotationSpeed.string=this.RotationSpeed.toString(),this.label_ShootSpeed.string=this.ShootSpeed.toString(),this.label_BulletSpeed.string=this.BulletSpeed.toString(),this.label_BulletLifeTime.string=this.BulletLifeTime.toString(),this.label_Score.string=this.Score.toString();var e=(Math.floor(10*this.Skill_1_Time)/10).toString();e.length<3&&(e+=".0"),this.label_Skill_1_Time.string=e},_getARandomPositon:function(){for(var e,t,i,n;e=880,t=250,i=Math.random()*(e-t+1)+t,e=600,t=35,n=Math.random()*(e-t+1)+t,this._getDistance(cc.v2(i,n),this.Block1.getPosition())<35||this._getDistance(cc.v2(i,n),this.Block2.getPosition())<35||this._getDistance(cc.v2(i,n),this.Block3.getPosition())<35||this._getDistance(cc.v2(i,n),this.Block4.getPosition())<35||this._getDistance(cc.v2(i,n),this.Turret.getPosition())<35;);return cc.v2(i,n)},_getDistance:function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},SwapGoodItem:function(){var e=new Array(this.upPlayerSpeedPrefab,this.upSkill_1_MAXPrefab),t=Math.floor(2*Math.random()),i=cc.instantiate(e[t]);i.parent=this.node;var n=this._getARandomPositon();i.x=n.x,i.y=n.y},SwapBadItem:function(){var e=new Array(this.upRotationSpeedPrefab,this.upShootSpeedPrefab,this.upBulletSpeedPrefab,this.upBulletLifeTimePrefab),t=Math.floor(4*Math.random()),i=cc.instantiate(e[t]);i.parent=this.node;var n=this._getARandomPositon();i.x=n.x,i.y=n.y},SwapItem:function(){10==this.Score&&this.SwapBadItem(),30==this.Score&&this.SwapBadItem(),this.Score%5==0?this.SwapGoodItem():this.SwapBadItem()},upRotationSpeed:function(){this.RotationSpeed+=1,this.Score+=1,this.UpdateData(),this.SwapItem()},upShootSpeed:function(){this.ShootSpeed+=1,this.Score+=1,this.UpdateData(),this.SwapItem()},upBulletSpeed:function(){this.BulletSpeed+=1,this.Score+=1,this.UpdateData(),this.SwapItem()},upBulletLifeTime:function(){this.BulletLifeTime+=1,this.Score+=1,this.UpdateData(),this.SwapItem()},upPlayerSpeed:function(){this.PlayerSpeed2+=1,this.Score+=1,this.UpdateData(),this.SwapItem()},upSkill_1_MAX:function(){this.Skill_1_Max+=1,this.Score+=1,this.UpdateData(),this.SwapItem()}}),cc._RF.pop()},{GameCommon:"GameCommon"}],HelloWorld:[function(e,t,i){"use strict";cc._RF.push(t,"280c3rsZJJKnZ9RqbALVwtK","HelloWorld"),cc.Class({extends:cc.Component,properties:{label:{default:null,type:cc.Label},text:"Hello, World!"},onLoad:function(){this.label.string=this.text},update:function(e){}}),cc._RF.pop()},{}],Item:[function(e,t,i){"use strict";cc._RF.push(t,"6b8918x1NFBE7e2NZ3BZFJT","Item");var n=e("GameCommon");cc.Class({extends:cc.Component,properties:{GameManager:{default:null,type:cc.Node,visible:!1},Type:{default:n.ItemType.upRotationSpeed,type:n.ItemType,displayName:"类型"},LifeTime:{default:null,visible:!1},laberTimer:{default:null,type:cc.Label}},start:function(){this.GameManager=cc.find("GameManager"),this.Type<n.ItemType.upPlayerSpeed?this.LifeTime=this.GameManager.getComponent("GameManager").ItemLifeTime1:this.LifeTime=this.GameManager.getComponent("GameManager").ItemLifeTime2,0==this.LifeTime?this.laberTimer.string="":this.laberTimer.string=this.LifeTime.toString()},update:function(e){0<this.LifeTime&&!this.GameManager.getComponent("GameManager").GamePause&&(this.LifeTime-=e*this.GameManager.getComponent("GameManager").GameSpeed,this.LifeTime<0?(this.Type<n.ItemType.upPlayerSpeed?this.GameManager.getComponent("GameManager").SwapBadItem():this.GameManager.getComponent("GameManager").SwapGoodItem(),this.node.destroy()):this.laberTimer.string=Math.floor(this.LifeTime).toString())}}),cc._RF.pop()},{GameCommon:"GameCommon"}],JoyControl:[function(e,t,i){"use strict";cc._RF.push(t,"c7eb7YpQDREyJhmxZvhHdpP","JoyControl");var n=e("GameCommon"),o=e("JoystickBG");cc.Class({extends:cc.Component,properties:{GameManager:{default:null,type:cc.Node,visible:!1},dot:{default:null,type:cc.Node,displayName:"摇杆节点"},ring:{default:null,type:o,displayName:"摇杆背景节点"},stickX:{default:0,displayName:"摇杆X位置"},stickY:{default:0,displayName:"摇杆Y位置"},touchType:{default:n.TouchType.DEFAULT,type:n.TouchType,displayName:"触摸类型"},directionType:{default:n.DirectionType.ALL,type:n.DirectionType,displayName:"方向类型"},sprite:{default:null,type:cc.Node,displayName:"操控的目标"},_stickPos:{default:null,type:cc.Node,displayName:"摇杆当前位置"},_touchLocation:{default:null,type:cc.Node,displayName:"摇杆当前位置"}},onLoad:function(){this.GameManager=cc.find("GameManager"),this._createStickSprite(),this.touchType==n.TouchType.FOLLOW&&this._initTouchEvent()},_createStickSprite:function(){this.ring.node.setPosition(this.stickX,this.stickY),this.dot.setPosition(this.stickX,this.stickY)},_initTouchEvent:function(){var e=this;e.node.on(cc.Node.EventType.TOUCH_START,e._touchStartEvent,e),e.node.on(cc.Node.EventType.TOUCH_MOVE,e._touchMoveEvent,e),e.node.on(cc.Node.EventType.TOUCH_END,e._touchEndEvent,e),e.node.on(cc.Node.EventType.TOUCH_CANCEL,e._touchEndEvent,e)},_touchStartEvent:function(e){this._touchLocation=e.getLocation();var t=this.node.convertToNodeSpaceAR(e.getLocation());this.ring.node.setPosition(t),this.dot.setPosition(t),this._stickPos=t},_touchMoveEvent:function(e){if(this._touchLocation.x==e.getLocation().x&&this._touchLocation.y==e.getLocation().y)return!1;var t=this.ring.node.convertToNodeSpaceAR(e.getLocation()),i=this.ring._getDistance(t,cc.p(0,0)),n=this.ring.node.width/2,o=this._stickPos.x+t.x,a=this._stickPos.y+t.y;if(i<n)this.dot.setPosition(cc.p(o,a));else{var l=this._stickPos.x+Math.cos(this.ring._getRadian(cc.p(o,a)))*n,s=this._stickPos.y+Math.sin(this.ring._getRadian(cc.p(o,a)))*n;this.dot.setPosition(cc.p(l,s))}this.ring._getAngle(cc.p(o,a)),this.ring._setSpeed(cc.p(o,a))},_touchEndEvent:function(){this.dot.setPosition(this.ring.node.getPosition()),this.ring._speed=0}}),cc._RF.pop()},{GameCommon:"GameCommon",JoystickBG:"JoystickBG"}],JoystickBG:[function(e,t,i){"use strict";cc._RF.push(t,"fca20lt3RxA0YBxOZw7L6ZX","JoystickBG");var n=e("GameCommon");cc.Class({extends:cc.Component,properties:{GameManager:{default:null,type:cc.Node,visible:!1},dot:{default:null,type:cc.Node,displayName:"摇杆节点"},_joyCom:{default:null,displayName:"joy Node"},_playerNode:{default:null,type:cc.Node,displayName:"被操作的目标Node"},_angle:{default:null,displayName:"当前触摸的角度"},_radian:{default:null,displayName:"弧度"},radius:{default:30,displayName:"变速距离"},_speed:0,_opacity:0},onLoad:function(){this.GameManager=cc.find("GameManager"),this._joyCom=this.node.parent.getComponent("JoyControl"),this._playerNode=this._joyCom.sprite,this._joyCom.touchType==n.TouchType.DEFAULT&&this._initTouchEvent()},_initTouchEvent:function(){var e=this;e.node.on(cc.Node.EventType.TOUCH_START,this._touchStartEvent,e),e.node.on(cc.Node.EventType.TOUCH_MOVE,this._touchMoveEvent,e),e.node.on(cc.Node.EventType.TOUCH_END,this._touchEndEvent,e),e.node.on(cc.Node.EventType.TOUCH_CANCEL,this._touchEndEvent,e)},update:function(e){switch(this._joyCom.directionType){case n.DirectionType.ALL:this._allDirectionsMove()}},_allDirectionsMove:function(){this.GameManager.getComponent("GameManager").GamePause?this._playerNode.getComponent(cc.RigidBody).linearVelocity=cc.v2(0,0):this._playerNode.getComponent(cc.RigidBody).linearVelocity=cc.v2(Math.cos(this._angle*(Math.PI/180))*this._speed*5,Math.sin(this._angle*(Math.PI/180))*this._speed*5)},_getDistance:function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},_getRadian:function(e){return this._radian=Math.PI/180*this._getAngle(e),this._radian},_getAngle:function(e){var t=this.node.getPosition();return this._angle=Math.atan2(e.y-t.y,e.x-t.x)*(180/Math.PI),this._angle},_setSpeed:function(e){var t=this._getDistance(e,this.node.getPosition());this._speed1=this.GameManager.getComponent("GameManager").PlayerSpeed1,this._speed2=this.GameManager.getComponent("GameManager").PlayerSpeed2,t<this.radius?this._speed=this._speed1:this._speed=this._speed2},_touchStartEvent:function(e){var t=this.node.convertToNodeSpaceAR(e.getLocation()),i=this._getDistance(t,cc.p(0,0)),n=this.node.width/2;this._stickPos=t;var o=this.node.getPosition().x+t.x,a=this.node.getPosition().y+t.y;return i<n&&(this.dot.setPosition(cc.p(o,a)),!0)},_touchMoveEvent:function(e){var t=this.node.convertToNodeSpaceAR(e.getLocation()),i=this._getDistance(t,cc.p(0,0)),n=this.node.width/2,o=this.node.getPosition().x+t.x,a=this.node.getPosition().y+t.y;if(i<n)this.dot.setPosition(cc.p(o,a));else{var l=this.node.getPosition().x+Math.cos(this._getRadian(cc.p(o,a)))*n,s=this.node.getPosition().y+Math.sin(this._getRadian(cc.p(o,a)))*n;this.dot.setPosition(cc.p(l,s))}this._getAngle(cc.p(o,a)),this._setSpeed(cc.p(o,a))},_touchEndEvent:function(){this.dot.setPosition(this.node.getPosition()),this._speed=0}}),cc._RF.pop()},{GameCommon:"GameCommon"}],PlayerControl:[function(e,t,i){"use strict";cc._RF.push(t,"f3ad8zyiV5M3KO2vpto1Krk","PlayerControl");var o=e("GameCommon");cc.Class({extends:cc.Component,properties:{GameManager:{default:null,type:cc.Node,visible:!1},ItemLock:{default:null,visible:!1},Timer:{default:null,visible:!1}},start:function(){this.GameManager=cc.find("GameManager"),this.ItemLock=!1},UnlockItemLock:function(){this.ItemLock=!1},onPreSolve:function(e,t,i){if(!this.GameManager.getComponent("GameManager").GamePause&&("Bullet"==i.node.name&&(i.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(0,0),this.GameManager.getComponent("GameManager").GameOver()),null!=i.node.getComponent("Item"))){if(this.ItemLock)return;this.ItemLock=!0,this.scheduleOnce(function(){this.UnlockItemLock()},.1),i.node.destroy();var n=i.node.getComponent("Item");n.Type==o.ItemType.upRotationSpeed&&this.GameManager.getComponent("GameManager").upRotationSpeed(),n.Type==o.ItemType.upShootSpeed&&this.GameManager.getComponent("GameManager").upShootSpeed(),n.Type==o.ItemType.upBulletSpeed&&this.GameManager.getComponent("GameManager").upBulletSpeed(),n.Type==o.ItemType.upBulletLifeTime&&this.GameManager.getComponent("GameManager").upBulletLifeTime(),n.Type==o.ItemType.upPlayerSpeed&&this.GameManager.getComponent("GameManager").upPlayerSpeed(),n.Type==o.ItemType.upSkill_1_MAX&&this.GameManager.getComponent("GameManager").upSkill_1_MAX()}}}),cc._RF.pop()},{GameCommon:"GameCommon"}],SkillButton:[function(e,t,i){"use strict";cc._RF.push(t,"b9721mSS1JPuZRtrwo8xejy","SkillButton"),cc.Class({extends:cc.Component,properties:{GameManager:{default:null,type:cc.Node,visible:!1}},start:function(){this.GameManager=cc.find("GameManager"),this._initTouchEvent()},_initTouchEvent:function(){var e=this;e.node.on(cc.Node.EventType.TOUCH_START,this._touchStartEvent,e),e.node.on(cc.Node.EventType.TOUCH_END,this._touchEndEvent,e),e.node.on(cc.Node.EventType.TOUCH_CANCEL,this._touchEndEvent,e)},_touchStartEvent:function(){this.GameManager.getComponent("GameManager").Skill_1_On=!0},_touchEndEvent:function(){this.GameManager.getComponent("GameManager").Skill_1_On=!1}}),cc._RF.pop()},{}],TurretControl:[function(e,t,i){"use strict";cc._RF.push(t,"dfdeckAElVHAIkJX5f1Sh8/","TurretControl"),cc.Class({extends:cc.Component,properties:{GameManager:{default:null,type:cc.Node,visible:!1},BulletPrefab:{default:null,type:cc.Prefab},ShootTimer:{default:null,visible:!1},BulletParent:{default:null,visible:!1}},onLoad:function(){},start:function(){this.GameManager=cc.find("GameManager"),this.GameInit()},GameInit:function(){this.BulletParent=new cc.Node("BulletParent"),this.BulletParent.parent=this.node,this.BulletParent.x=0,this.BulletParent.y=0,this.CreateBullet(),this.ShootTimer=0},GameReset:function(){this.BulletParent.destroy(),this.GameInit()},update:function(e){var t=this.GameManager.getComponent("GameManager").RotationSpeed;t=10+t,t*=this.GameManager.getComponent("GameManager").GameSpeed,this.node.rotation+=e*t,this.ShootTimer-=e*this.GameManager.getComponent("GameManager").GameSpeed,this.ShootTimer<=0&&this.CreateBullet()},CreateBullet:function(){var e=cc.instantiate(this.BulletPrefab);e.x=0,e.y=0,e.parent=this.BulletParent;var t=this.GameManager.getComponent("GameManager").BulletSpeed;t=100+10*t,e.getComponent(cc.RigidBody).linearVelocity=cc.v2(cc.pForAngle(this.node.rotation*Math.PI/180).y*t,cc.pForAngle(this.node.rotation*Math.PI/180).x*t);var i=this.GameManager.getComponent("GameManager").ShootSpeed;i=20/(10+i),this.ShootTimer=i}}),cc._RF.pop()},{}]},{},["BulletControl","GameCommon","GameManager","Item","JoyControl","JoystickBG","PlayerControl","SkillButton","HelloWorld","TurretControl"]);